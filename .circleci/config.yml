version: 2.1
orbs:
  aws-s3: circleci/aws-s3@1.0.16
jobs:
  build:
    docker:
      - image: 'circleci/node:latest'
    steps:
      - checkout
      - run: npm install
      - run:
          name: "Lint code"
          command: |
            npm run lint
      - run:
          name: "Test code"
          command: |
            npm test
      - run:
          name: "Echo S3 bucket name"
          command: echo S3_BUCKET_NAME
      - run:
          name: "Echo S3 bucket name with dollar"
          command: echo $S3_BUCKET_NAME
      - run:
          name: "Echo S3 bucket name with dollar and brackets"
          command: echo ${S3_BUCKET_NAME}
      # - aws-s3/sync:
      #     arguments: |
      #       --acl public-read \
      #       --cache-control "max-age=86400"
      #     aws-access-key-id: AWS_ACCESS_KEY_ID_BLUE
      #     aws-region: AWS_REGION_BLUE
      #     aws-secret-access-key: AWS_SECRET_ACCESS_KEY_BLUE
      #     from: bucket
      #     overwrite: true
      #     to: 's3://my-s3-bucket-name/prefix'
      # - aws-s3/copy:
      #     arguments: '--dryrun'
      #     from: bucket/build_asset.txt
      #     to: 's3://my-s3-bucket-name'
